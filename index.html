<!DOCTYPE html>

<p style="padding-left: 30px;">Welcome!!!&nbsp;</p>
<p style="padding-left: 30px;">THE link for that page <a href="http://34.241.105.153/">CLICK</a></p>
<p style="padding-left: 30px;">REPO GITHAB &nbsp;<a href="https://github.com/poloz2005/jjenkins">GIT</a></p>
<p style="padding-left: 30px;">My Pipeline</p>
<p style="padding-left: 30px;">node {<br />def main<br />git url: 'https://github.com/poloz2005/jjenkins.git'<br />stage("build")<br />myimage = docker.build("poloz942/web")<br />stage('Push image')<br />docker.withRegistry('https://registry.hub.docker.com', 'dockerhub'){<br />myimage.push("${env.BUILD_ID}")<br />myimage.push("latest")<br />}<br />stage("clean")<br />sh "docker image prune -af"<br />stage("Deploy_on_emote_machine")<br />sh "sudo docker-machine ssh nginx-prod sudo docker pull poloz942/web"<br />sh "sudo docker-machine ssh nginx-prod sudo docker stop myimage"<br />sh "sudo docker-machine ssh nginx-prod sudo docker run -d --rm -p 80:80 --name myimage poloz942/web"<br />}</p>
<p style="padding-left: 30px;">&nbsp;</p>
<p dir="ltr">Task definition:</p>
<p dir="ltr">Create dockerized Nginx server with GitHub webhook deployment triggering using Jenkins pipelines (Jenkinsfile).</p>
<p dir="ltr">Stages</p>
<ol>
<li dir="ltr">
<p dir="ltr">Build. Compile the latest version of Nginx server with a lua-nginx-module.</p>
</li>
<li dir="ltr">
<p dir="ltr">Dockerize. Create a docker image with adding custom nginx.conf and index.html from the repository files. Push docker image to the public Docker registry.</p>
</li>
<li dir="ltr">
<p dir="ltr">Deploy. Deploy Nginx container on EC2 instance using docker-machine.</p>
</li>
</ol>
<p dir="ltr">Continuous deployment should start by push event to the git repository master branch.</p>
<p dir="ltr">Jenkins URL http://ec2-34-242-40-105.eu-west-1.compute.amazonaws.com:8080/</p>
<p style="padding-left: 30px;">&nbsp;</p>
